---
exclude: ^data/

repos:
  # Local hooks using current venv
  - repo: local
    hooks:
      # Basic file checks (auto-fix enabled)
      - id: trailing-whitespace
        name: trailing-whitespace
        entry: python scripts/fix_trailing_whitespace.py
        language: system
        types: [text]

      - id: end-of-file-fixer
        name: end-of-file-fixer
        entry: python scripts/fix_end_of_file.py
        language: system
        types: [text]

      - id: check-yaml
        name: check-yaml
        entry: python -c "import sys,yaml;[yaml.safe_load(open(f))for f in sys.argv[1:]]"
        language: system
        types: [yaml]

      - id: check-json
        name: check-json
        entry: python -c "import sys,json;[json.load(open(f))for f in sys.argv[1:]]"
        language: system
        types: [json]

      - id: check-toml
        name: check-toml
        entry: python -c "import sys,tomllib;[tomllib.load(open(f,'rb'))for f in sys.argv[1:]]"
        language: system
        types: [toml]

      # Ruff - linter and formatter
      - id: ruff
        name: ruff
        entry: ruff check --fix
        language: system
        types: [python]

      - id: ruff-format
        name: ruff-format
        entry: ruff format
        language: system
        types: [python]

      # Bandit - security linter
      - id: bandit
        name: bandit
        entry: bandit -c pyproject.toml
        language: system
        types: [python]

      # Mypy - type checking
      - id: mypy
        name: mypy
        entry: mypy --ignore-missing-imports --no-strict-optional
        language: system
        types: [python]

      # Yamllint
      - id: yamllint
        name: yamllint
        entry: "yamllint -d '{extends: default, rules: {line-length: {max: 120}}}'"
        language: system
        types: [yaml]

# Run these hooks on all files during the first installation
default_stages: [pre-commit]

# Fail fast on first error
fail_fast: false
